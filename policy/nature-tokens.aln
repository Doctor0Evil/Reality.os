SECTION,NATURE-TOKENS
ROW,VERSION,1
ROW,NOTE,Readonly diagnostic predicates over TREE assets; no actuation, no capability changes.

# Shared configuration
ROW,WINDOW_EPOCHS,300          # example: 5 minutes at 1 Hz
ROW,MIN_GROUP_SIZE,3           # for UNFAIR_DRAIN peer groups
ROW,ROH_CEILING,0.30           # safety context only, not enforced here

ROW,ID,CALM_STABLE
ROW,DESCRIPTION,High reserves and low distress over a full window.
ROW,INPUT,TREE              # operates on TreeOfLifeView history
ROW,WINDOW_EPOCHS_REF,WINDOW_EPOCHS

# Thresholds (normalized 0.0–1.0)
ROW,THRESH,LIFEFORCE_MIN,0.70
ROW,THRESH,OXYGEN_MIN,0.60
ROW,THRESH,BLOOD_MAX,0.50
ROW,THRESH,FEAR_MAX,0.30
ROW,THRESH,PAIN_MAX,0.30
ROW,THRESH,DECAY_MAX,0.40

# Predicate: all good for the whole window
ROW,WHEN,
  AVG_WINDOW(TREE.LIFEFORCE) >= LIFEFORCE_MIN AND
  AVG_WINDOW(TREE.OXYGEN)    >= OXYGEN_MIN    AND
  AVG_WINDOW(TREE.BLOOD)     <= BLOOD_MAX     AND
  AVG_WINDOW(TREE.FEAR)      <= FEAR_MAX      AND
  AVG_WINDOW(TREE.PAIN)      <= PAIN_MAX      AND
  AVG_WINDOW(TREE.DECAY)     <= DECAY_MAX

ROW,ADVISORY_LABEL,calm-stable
ROW,USEDFOR,diagnostics,fairness,education
ROW,NON_ACTUATING,TRUE

ROW,ID,OVERLOADED
ROW,DESCRIPTION,Sustained strain; any major stress channel overloaded.
ROW,INPUT,TREE
ROW,WINDOW_EPOCHS_REF,WINDOW_EPOCHS

ROW,THRESH,DECAY_MIN,0.70
ROW,THRESH,POWER_MIN,0.70
ROW,THRESH,FEAR_MIN,0.60
ROW,THRESH,PAIN_MIN,0.60
ROW,THRESH,LIFEFORCE_MAX,0.40

# Predicate: OR across overload channels
ROW,WHEN,
  AVG_WINDOW(TREE.DECAY)      >= DECAY_MIN OR
  AVG_WINDOW(TREE.POWER)      >= POWER_MIN OR
  AVG_WINDOW(TREE.FEAR)       >= FEAR_MIN  OR
  AVG_WINDOW(TREE.PAIN)       >= PAIN_MIN  OR
  AVG_WINDOW(TREE.LIFEFORCE)  <= LIFEFORCE_MAX

ROW,ADVISORY_LABEL,overloaded
ROW,USEDFOR,cooldown-advice,fairness,psychload-awareness
ROW,NON_ACTUATING,TRUE

ROW,ID,RECOVERY
ROW,DESCRIPTION,Moving out of overload; stress falling, lifeforce rising.
ROW,INPUT,TREE
ROW,WINDOW_EPOCHS_RECENT,300
ROW,WINDOW_EPOCHS_PAST,300

ROW,THRESH,DECAY_DROP_MIN,0.10
ROW,THRESH,LIFEFORCE_RISE_MIN,0.10
ROW,THRESH,FEAR_DROP_MIN,0.10
ROW,THRESH,PAIN_DROP_MIN,0.10

# Predicate: previously overloaded, now improving
ROW,WHEN,
  PREVIOUS(NATURE.OVERLOADED) = TRUE AND
  (AVG_WINDOW_PAST(TREE.DECAY)     - AVG_WINDOW_RECENT(TREE.DECAY))    >= DECAY_DROP_MIN AND
  (AVG_WINDOW_RECENT(TREE.LIFEFORCE) - AVG_WINDOW_PAST(TREE.LIFEFORCE)) >= LIFEFORCE_RISE_MIN AND
  (AVG_WINDOW_PAST(TREE.FEAR)      - AVG_WINDOW_RECENT(TREE.FEAR))     >= FEAR_DROP_MIN AND
  (AVG_WINDOW_PAST(TREE.PAIN)      - AVG_WINDOW_RECENT(TREE.PAIN))     >= PAIN_DROP_MIN

ROW,ADVISORY_LABEL,recovery
ROW,USEDFOR,cooldown-evaluation,teaching,personal-tracking
ROW,NON_ACTUATING,TRUE

ROW,ID,UNFAIR_DRAIN
ROW,DESCRIPTION,One subject’s reserves draining faster than peers under similar conditions.
ROW,INPUT,TREE+GROUP
ROW,WINDOW_EPOCHS_REF,WINDOW_EPOCHS

ROW,THRESH,BUDGET_GAP_MIN,0.15
ROW,THRESH,OVERLOAD_FRACTION_MIN,0.20

# Budget example: mean of LIFEFORCE and OXYGEN over window
ROW,DEFINE,BUDGET_SELF,
  0.5 * (AVG_WINDOW(TREE.LIFEFORCE_SELF) + AVG_WINDOW(TREE.OXYGEN_SELF))

ROW,DEFINE,BUDGET_PEER_MEDIAN,
  MEDIAN_PEER( 0.5 * (AVG_WINDOW(TREE.LIFEFORCE_PEER) + AVG_WINDOW(TREE.OXYGEN_PEER)) )

# Overload fraction: fraction of epochs in window where OVERLOADED is true
ROW,DEFINE,OVERLOAD_FRACTION_SELF,
  FRACTION_WINDOW( NATURE.OVERLOADED_SELF = TRUE )

ROW,DEFINE,OVERLOAD_FRACTION_PEER_MEDIAN,
  MEDIAN_PEER( FRACTION_WINDOW( NATURE.OVERLOADED_PEER = TRUE ) )

# Predicate: worse budget AND higher overload than comparable peers
ROW,WHEN,
  GROUP_SIZE >= MIN_GROUP_SIZE AND
  (BUDGET_PEER_MEDIAN - BUDGET_SELF)          >= BUDGET_GAP_MIN AND
  (OVERLOAD_FRACTION_SELF - OVERLOAD_FRACTION_PEER_MEDIAN) >= OVERLOAD_FRACTION_MIN

ROW,ADVISORY_LABEL,unfair-drain
ROW,USEDFOR,fairness-review,workload-balancing,rights-audits
ROW,NON_ACTUATING,TRUE
